# MVC-frame
Няколко думи за проекта: 
    Това е framework който е създаден по подобие на ларавел 4 , целта му е личен проект за дистанционно управление на жилището ми . 
    Функциите са му комуникация с втори сървър Raspberry Pi  (който комуникира с различните arduino-та и сензори в жилището). 
    Освен това има за цел изпълението на различни функционалности за който е нужно използването на Web паяци като:
    
    
    Youtube downloader - система която може да сваля песни от Youtube и да ги запазва в сървъра за локално изпълнение.
        Тази система може да сваля песен от подаден и линк , да сваля цял плейлист , да търси песни по подадено и име на изпълнител или да проверява на определен период от време за нови песни по предварително зададени и страници.
    
    Cooking Helper-> Има за цел да помага в изобра на това какво да се готви . Скрипта получава зададена му съставка или вид ястоие проверява локална база данни за рецепри използвани в миналото който се визуализират първи , ако потребителя не намери желана от него алгоритъма му предоставя вече подготвен списък от рецепти по зададените вече параметри който е взаймстван от няколко кулинарни сайта. 
    При избор на рецепта от външен източник тя се добавя в базата данни. 
    
    Wether and News algorytem - целта му е да предоставя на потребителя актуални прогноза за времето и актуални новини от избрани от него източници 
    
    


this is my version of PHP MVC Framework , its verry similar to laravel 4+ framework.
inside i place one simple framework writed on Perl, currently it use for Youtube Downloader, but he can to use for frame to execute difference Perl algoritms or Web spiders. 
This framework is created for personal needes . Some of functionalities may be adopted for the security hole. 
Тhe need for this system is to use a local server for smart home, it is not intended for public access. However, it can be set part of it be used for public access (via routings)


Two frameworks is currently uneder construction and i work on it in my free time.


PHP framework documentation: 
  Routing: 
    We have currently 5 request methods : GET, POST, DELETE, UPDATE and CONSOLE.
    first 4 is standart request from Rest API, the 5 method is use for execute a files on diferent languages by terminal execution .
     
     Структурата на рутинга е както следва :
     
      $routes = array(
        array("GET","home", "home@index"),
      );
        във функцията  all_routes  в файла routes.php 
        има масив $routes които сдържа под масиви като всеки под масив е различна заявка . Структурата на тези под масиви е следната : 
        първия елемент отговаря на типа заявка , втория отговаря на зададеното урл , а третия отговаря към кой контролер и коя фунцкия да         води (home- контролер index-функция във контролера).
        при групирането на рутинги синтаксиса е следния : първия елемент показва че е група , втория линка който води към групата и третия          за роутингите който са във тази група.
         
         Като параметри в урлто има няколко правила за подаване на данни : 
          {}- добавяне на 1 стойност ;
          {}? - добавяне на 1 стойност, но стойността може и да липсва; 
          {[]}- добавяне на няколко стойности (като лементи на масив )
          в всеки израз се поставя опреденело име на променлива към която се предава стойността подадена чрез урл . Пример {id}?
              TO DO : UPDATE and CONSOLE methods is currently on under construction 

–––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
       Контролери и Модели : 
          За да създадете контролер и модел се изпълнява в конзолата командата php terminal.php controller create името на контролера , 
          това създава контролер и модел с даденото име и необходимите му наследявания и фунционалности.
          Контролера наслядва класа BaseConroller който се грижи за извикването на модела който отговаря този клас , както и за        извикванията на различните виюта и подаването им на променливи . 
          TO DO :  за в бъдеще трябва да се вкара възможност за извикване на други модели към дадения клас както и да се създаде конфигурационен файл за различни опции като например дебгинг мода да смарти , кеширанията в смарти и жизнения им цикъл 
          
          Извикването на определено вию от контролер става по следния начин : 
          self::View('index', $view);
           като index е файла който се извиква , а $view е масив с параметри които му се подават . Пример : $view = array('users'=> $users['query'],'pages'=>$users['pages']);
         
         извикването на функция от модела става с следния синтаксис : 
          $this->db-> фукцията която ни е нужна ;
          Пример: 
         $user = $this->db->getUserInfo($_GET['id']);
          
          Модел: 
          Модела основно наследява библиотеката за базите данни което позволява по лесното извикване и използване на различните функции от тази библиотека. 
          TO DO: Да се вкара библиотека за работа и с MongoDB  както и да се конфигурира към моделите  

_______________________________________________________________________________________________________________________________________


    Terminal.php
      Terminal.php  има за цел да се изпълняват различни функционалности посредством терминал. Основните му две са създаването на   файлове за базите данни и тяхното изпление както и за изплниения и тестване на различни  скриптови алгоритми .
  
    Миграции : за по лесно създаване на таблици в Msql можете да съъздадете файл с пааметрите на таблицата която искате , както и да я променяте или истривате. Също така миграциите са удобен начин за трансфериране на таблици от един вид бази данни към друг.
    Създаването на такъв файл става посредством командата : terminal.php mysql create login това ще създаде файл в папка migration сс следното съдържание : 
    <?php
			function tableConfig (){
				$table = array(
					'dropTable' => 'login',
					'engine' => 'MyISAM',
					'encoding' => 'utf8',
					'columns'=> array(
						'id' => array(
							'type' => 'int',
							'size'=> 10,
							'autoIncrement' => 1,
							'notNull'  => 1,
							'primaryKey'  => 1,
							'unsigned'  => 1
						),
						'username' => array(
							'type' => 'varchar',
							'size'=> 100,
							'autoIncrement' => 0,
							'notNull'  => 1,
							'primaryKey'  => 0,
							'unsigned'  => 0
						),
						'password' => array(
							'type' => 'varchar',
							'size'=> 10,
							'autoIncrement' => 0,
							'notNull'  => 1,
							'primaryKey'  => 0,
							'unsigned'  => 0
						)
					)
				);
			return $table;
			}
      
      това е примерно сдържание с цел да улесни използването на този подход в масива $table има няколко под масива dropTable engine encoding columns.  dropTable има за цел да изтрие ако има вече създадена таблица с това име,  engine е енджина с който ще работи таблицата ,  encoding е енкодинга който ще използва таблицата, в columns се съдържа по 1 под масив за всяка една нейна колона . Пример елемента от columns с ид username , това ид е името на колоната а в под масива username се съъдържат неговите специфики : 
      	      'type' => типа на данни на колоната,
							'size'=> допустимия размер за стойности в тази колона,
							'autoIncrement' => 0 = да 1 = не,
							'notNull'  => 0 = да 1 = не,
							'primaryKey'  => 0 = да 1 = не,
							'unsigned'  => 0 = да 1 = не
              
              ВАЖНО!!! не се позволява да има повече от 1 колона за която autoIncrement е равно на 1 ;
              
              TO DO:   terminal.php mysql update table
              
              terminal.php mysql migrate table : след като е създаден файла на миграцията с изпълението на тази команта се изпълнява SQL заявка която създава таблицата с дадените в файла параметри.
              
	            terminal.php mysql delete table : команда която изтрива дадената команда безвъзвратно ; 
              ВАЖНО !!! командата изтрива директно заявката . TO DO:  добре е да се сложи допълнително питане за изпълнението на тази заявка 
              
              
              
               terminal.php script root.pl 1 www.google.bg : Тази команда извиква файла който и е подаден и му подава параметрите след името на файла . Пример за терминално извикване на същия файл perl root.pl 1 www.google.bg ,удобно е за тестване на различни скриптове . 
               ВАЖНО !!! Към момента командата изплнява единствено Perl файлове който се намират в папка PerlScripts. Поради наличието на framework  който се грижи за изплнението на различни Perl скриптове . В бъъдеще тази команда подлежи на промяна с цел включване на подобен framework  и на Python нужен за директна комуникация с хардуерните елементи 
	 
